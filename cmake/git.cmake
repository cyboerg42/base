execute_process(COMMAND git log -1 --format=%h WORKING_DIRECTORY ${CMAKE_SOURCE_DIR} OUTPUT_VARIABLE GIT_COMMIT_HASH OUTPUT_STRIP_TRAILING_WHITESPACE)
if (NOT GIT_COMMIT_HASH STREQUAL "")
    message(STATUS "GIT_COMMIT_HASH \t= ${GIT_COMMIT_HASH}")
    add_definitions("-DGIT_COMMIT_HASH=${GIT_COMMIT_HASH}")
endif()

execute_process(COMMAND git rev-parse --abbrev-ref HEAD WORKING_DIRECTORY ${CMAKE_SOURCE_DIR} OUTPUT_VARIABLE GIT_BRANCH OUTPUT_STRIP_TRAILING_WHITESPACE)
if (NOT GIT_BRANCH STREQUAL "" AND NOT GIT_BRANCH STREQUAL "master")
    message(STATUS "GIT_BRANCH      \t= ${GIT_BRANCH}")
    add_definitions("-DGIT_BRANCH=${GIT_BRANCH}")
endif()
